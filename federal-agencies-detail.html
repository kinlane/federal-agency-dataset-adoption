---
layout: page
title: Federal Agency
---
{% raw  %}
<script id="agencyTemplate" type="text/template">

    <center><h2>{{name}}</h2></center>
    <p align="center"><img src="{{logo}}" width="250" style="padding: 15px;" /></a></p>
    <p align="center">
        <a href="{{url}}" target="_blank" title="{{name}}">{{url}}</a>
     </p>      
</script>
{% endraw %}

<div>
    <div id="agencyDetail"> </div>
</div>  

<script type="text/javascript">
function getFederAgencyDetails(thisagencyid)
    {
    $.getJSON('data/federal-agencies.json', function(data) {
         $.each(data['agencies'], function(key, val) {
            
            agency_id = val['agency_id']; 

            if(thisagencyid == agency_id)
                {
                    
                var template = $('#agencyTemplate').html();
                var html = Mustache.to_html(template, val);
                $('#agencyDetail').append(html);     
               
                
                }
            });                                    
        });
    }  

var agencyid = getUrlVar('agency_id');
getFederAgencyDetails(agencyid);
</script>

{% raw  %}
<script id="agencydatatemplate" type="text/template">

    <tr>
        <td>
            {{title}}
            <div style="display:none; width: 100%; height: 100px; overflow: auto; border-top: 1px solid #000; padding-top: 3px;" id="{{agency_id}}-description">{{description}}</div>
            <div style="display:none; width: 100%; height: 100px; overflow: auto; border-top: 1px solid #000; padding-top: 3px;" id="{{agency_id}}-distributions"></div>
        </td>
        <td><a href="#" onclick="showDescription('{{agency_id}}-description'); return false;"><span class="label label-primary">D</span</a></td>
        <td><span class="label label-primary">L</span</td>
        <td><span class="label label-primary">A</span</td>
    </tr>    
    
</script>
{% endraw %}

<div class="table-responsive">
      <table class="table table-bordered table-striped">
        <thead>
          <tr>
            <th>Title</th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
        </thead>  
        <tbody id="agencydata">
            
        </tbody>      
    </table>
</div>  

<script type="text/javascript">

function showDescription(r)
    {
    $row = document.getElementById(r);    
    //alert($row.style.display);
    if($row.style.display=='none')
        {
        $row.style.display='';    
        }   
    else
        {
        $row.style.display='none';        
        }
    }
    
function getFederalAgencyDatasets(thisagencyid)
    {
    agencydatajsonurl = '/data/' + thisagencyid + '.json';    
    $.getJSON(agencydatajsonurl, function(data) {
         $.each(data, function(key, val) {  
            var template = $('#agencydatatemplate').html();
            var html = Mustache.to_html(template, val);
            $('#agencydata').append(html);     
            });                                    
        });
    }  
getFederalAgencyDatasets(agencyid);    
</script>
